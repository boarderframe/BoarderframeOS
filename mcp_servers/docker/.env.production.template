# Production Environment Configuration Template
# Copy this file to .env.production and configure all variables
# NEVER commit .env.production to version control

# ==========================================
# SECURITY CONFIGURATION
# ==========================================

# Generate strong random secrets (use: openssl rand -hex 32)
WEBUI_SECRET_KEY=CHANGE_THIS_TO_RANDOM_32_CHAR_HEX_STRING
GRAFANA_ADMIN_PASSWORD=CHANGE_THIS_TO_STRONG_PASSWORD
REDIS_PASSWORD=CHANGE_THIS_TO_STRONG_PASSWORD
ENCRYPTION_KEY=CHANGE_THIS_TO_RANDOM_32_CHAR_HEX_STRING

# JWT Configuration
JWT_SECRET=CHANGE_THIS_TO_RANDOM_64_CHAR_HEX_STRING
JWT_EXPIRATION=3600
JWT_REFRESH_EXPIRATION=604800

# ==========================================
# NETWORK SECURITY
# ==========================================

# SSL/TLS Configuration
SSL_ENABLED=true
SSL_DOMAIN=your-domain.com
SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/key.pem

# CORS Configuration (whitelist your domains)
CORS_ORIGINS=https://your-domain.com,https://app.your-domain.com
CORS_CREDENTIALS=true

# Rate Limiting (requests per minute)
RATE_LIMIT_WINDOW=60000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_STRICT_MAX_REQUESTS=10

# ==========================================
# APPLICATION CONFIGURATION
# ==========================================

# Environment
NODE_ENV=production
DEBUG_ENABLED=false
LOG_LEVEL=warn

# Security Features
SECURITY_AUDIT_ENABLED=true
RATE_LIMIT_ENABLED=true
SESSION_SECURE=true
CSRF_PROTECTION=true
HELMET_ENABLED=true

# Database Configuration
DATABASE_URL=redis://redis:6379
REDIS_URL=redis://redis:6379
REDIS_PASSWORD_REQUIRED=true
REDIS_MAX_CONNECTIONS=50

# ==========================================
# MONITORING & ALERTING
# ==========================================

# Metrics Collection
METRICS_ENABLED=true
METRICS_PORT=9464
METRICS_PATH=/metrics

# Health Checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10

# Log Configuration
LOG_FORMAT=json
LOG_ROTATION=daily
LOG_MAX_SIZE=100M
LOG_MAX_FILES=30

# ==========================================
# BACKUP CONFIGURATION
# ==========================================

# Backup Schedule (cron format: minute hour day month dayofweek)
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_COMPRESSION=true
BACKUP_ENCRYPTION=true

# S3 Backup Configuration (optional)
S3_BACKUP_ENABLED=false
S3_BUCKET_NAME=your-backup-bucket
S3_REGION=us-east-1
AWS_ACCESS_KEY_ID=YOUR_AWS_ACCESS_KEY
AWS_SECRET_ACCESS_KEY=YOUR_AWS_SECRET_KEY

# ==========================================
# NOTIFICATION CONFIGURATION
# ==========================================

# Slack Notifications (optional)
SLACK_WEBHOOK=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
SLACK_CHANNEL=#alerts
SLACK_USERNAME=MCP-Monitor

# Email Notifications (optional)
EMAIL_ENABLED=false
EMAIL_RECIPIENT=admin@your-domain.com
SMTP_HOST=smtp.your-provider.com
SMTP_PORT=587
SMTP_USER=your-smtp-user
SMTP_PASSWORD=your-smtp-password

# ==========================================
# RESOURCE LIMITS
# ==========================================

# Container Resource Limits
MCP_MANAGER_CPU_LIMIT=1.0
MCP_MANAGER_MEMORY_LIMIT=512M
MCP_MANAGER_CPU_RESERVATION=0.5
MCP_MANAGER_MEMORY_RESERVATION=256M

REDIS_CPU_LIMIT=0.5
REDIS_MEMORY_LIMIT=256M
REDIS_CPU_RESERVATION=0.25
REDIS_MEMORY_RESERVATION=128M

OLLAMA_CPU_LIMIT=2.0
OLLAMA_MEMORY_LIMIT=4G
OLLAMA_CPU_RESERVATION=1.0
OLLAMA_MEMORY_RESERVATION=2G

# ==========================================
# SECURITY SCANNING
# ==========================================

# Container Security Scanning
SECURITY_SCAN_ENABLED=true
SECURITY_SCAN_SCHEDULE=0 4 * * 0
VULNERABILITY_THRESHOLD=HIGH

# Image Signing
IMAGE_SIGNING_ENABLED=false
COSIGN_PUBLIC_KEY=your-cosign-public-key

# ==========================================
# DEVELOPMENT OVERRIDES (FOR STAGING)
# ==========================================

# Only enable these in staging/development environments
# ENABLE_SIGNUP=false
# DEBUG_MODE=false
# DISABLE_AUTH=false
# MOCK_AUTH=false

# ==========================================
# INFRASTRUCTURE
# ==========================================

# Docker Configuration
DOCKER_BUILDKIT=1
COMPOSE_DOCKER_CLI_BUILD=1

# Network Configuration
NETWORK_SUBNET=172.21.0.0/16
NETWORK_GATEWAY=172.21.0.1

# Storage Configuration
VOLUME_DRIVER=local
BACKUP_VOLUME_SIZE=50G

# ==========================================
# COMPLIANCE & AUDITING
# ==========================================

# Audit Logging
AUDIT_LOG_ENABLED=true
AUDIT_LOG_LEVEL=info
AUDIT_LOG_RETENTION=90

# Compliance
GDPR_COMPLIANCE=true
HIPAA_COMPLIANCE=false
SOC2_COMPLIANCE=false

# Security Headers
SECURITY_HEADERS_ENABLED=true
HSTS_MAX_AGE=31536000
CSP_ENABLED=true
X_FRAME_OPTIONS=DENY

# ==========================================
# FEATURE FLAGS
# ==========================================

# Enable/disable features
FEATURE_MCP_CONNECTOR=true
FEATURE_OLLAMA_INTEGRATION=true
FEATURE_MONITORING=true
FEATURE_BACKUP=true
FEATURE_HEALTH_MONITORING=true

# ==========================================
# PERFORMANCE TUNING
# ==========================================

# Node.js Performance
NODE_OPTIONS=--max-old-space-size=512 --optimize-for-size

# Redis Performance
REDIS_MAX_MEMORY=512mb
REDIS_MAX_MEMORY_POLICY=allkeys-lru

# Nginx Performance
NGINX_WORKER_PROCESSES=auto
NGINX_WORKER_CONNECTIONS=1024
NGINX_KEEPALIVE_TIMEOUT=65